<mxfile host="app.diagrams.net" modified="2025-08-15T16:56:00Z" agent="OMEGA-FastMCP" version="22.0.0">
  <diagram name="FastMCP Federation â€” Deployment View" id="omega_fastmcp_deploy_v1">
    <mxGraphModel dx="1920" dy="1080" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>

        <!-- Ingress / Mesh -->
        <mxCell id="ingress" value="Zero-Trust Ingress / Service Mesh (mTLS)" style="swimlane;startSize=28;fillColor=#1b1b1b;gradientColor=#2a2a2a;strokeColor=#444444;fontColor=#ffffff;rounded=1;fontSize=14;" vertex="1" parent="1">
          <mxGeometry x="40" y="60" width="1840" height="960" as="geometry"/>
        </mxCell>

        <!-- Namespace: Core Services -->
        <mxCell id="ns_core" value="Namespace: core-services" style="swimlane;startSize=22;fillColor=#262626;strokeColor=#555555;fontColor=#ffffff;rounded=1;fontSize=12;" vertex="1" parent="ingress">
          <mxGeometry x="20" y="40" width="880" height="880" as="geometry"/>
        </mxCell>

        <!-- Federation Core Pod -->
        <mxCell id="fc_pod" value="Federation Core (FastMCP Resources)\n:9405 /mcp/resources/*" style="shape=rectangle;rounded=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#4D3B00;gradientColor=#ffe599;gradientDirection=north;shadow=1;whiteSpace=wrap;" vertex="1" parent="ns_core">
          <mxGeometry x="40" y="80" width="360" height="120" as="geometry"/>
        </mxCell>

        <!-- MCP Registry -->
        <mxCell id="mcp_reg" value="MCP Registry (Mongo-backed)\n/tools/* & /servers/*" style="shape=rectangle;rounded=1;fillColor=#292929;strokeColor=#666666;fontColor=#FFFFFF;gradientColor=#444444;gradientDirection=north;shadow=1;whiteSpace=wrap;" vertex="1" parent="ns_core">
          <mxGeometry x="460" y="80" width="360" height="120" as="geometry"/>
        </mxCell>

        <!-- Agent Registry -->
        <mxCell id="agent_reg" value="Agent Registry (Mongo-backed)\n/agents/*" style="shape=rectangle;rounded=1;fillColor=#292929;strokeColor=#666666;fontColor=#FFFFFF;gradientColor=#444444;gradientDirection=north;shadow=1;whiteSpace=wrap;" vertex="1" parent="ns_core">
          <mxGeometry x="460" y="240" width="360" height="120" as="geometry"/>
        </mxCell>

        <!-- Context Server -->
        <mxCell id="oracle" value="Context Server (The Oracle)\nintel/*" style="shape=rectangle;rounded=1;fillColor=#292929;strokeColor=#666666;fontColor=#FFFFFF;gradientColor=#444444;gradientDirection=north;shadow=1;whiteSpace=wrap;" vertex="1" parent="ns_core">
          <mxGeometry x="40" y="240" width="360" height="120" as="geometry"/>
        </mxCell>

        <!-- Namespace: member-services -->
        <mxCell id="ns_member" value="Namespace: member-services" style="swimlane;startSize=22;fillColor=#262626;strokeColor=#555555;fontColor=#ffffff;rounded=1;fontSize=12;" vertex="1" parent="ingress">
          <mxGeometry x="920" y="40" width="900" height="880" as="geometry"/>
        </mxCell>

        <!-- Example Member: Code Analyzer -->
        <mxCell id="svc_code" value="Code Analyzer MCP\n:9501 /mcp/call/*" style="shape=rectangle;rounded=1;fillColor=#fff2cc;strokeColor=#d6b656;fontColor=#4D3B00;gradientColor=#ffe599;gradientDirection=north;shadow=1;whiteSpace=wrap;" vertex="1" parent="ns_member">
          <mxGeometry x="40" y="80" width="360" height="120" as="geometry"/>
        </mxCell>

        <!-- Example Member: Data Sanitizer -->
        <mxCell id="svc_data" value="Data Sanitizer MCP\n:9511 /mcp/call/*" style="shape=rectangle;rounded=1;fillColor=#fde2ff;strokeColor=#c77dff;fontColor=#4a235a;gradientColor=#d0b3ff;gradientDirection=north;shadow=1;whiteSpace=wrap;" vertex="1" parent="ns_member">
          <mxGeometry x="460" y="80" width="360" height="120" as="geometry"/>
        </mxCell>

        <!-- Example Member: Chaos Tester -->
        <mxCell id="svc_chaos" value="Chaos Tester MCP\n:9521 /mcp/call/*" style="shape=rectangle;rounded=1;fillColor=#ccffff;strokeColor=#4dc3ff;fontColor=#003b4d;gradientColor=#99e6ff;gradientDirection=north;shadow=1;whiteSpace=wrap;" vertex="1" parent="ns_member">
          <mxGeometry x="40" y="240" width="360" height="120" as="geometry"/>
        </mxCell>

        <!-- Storage (Mongo/Redis) -->
        <mxCell id="storage" value="Storage Layer\nMongoDB / Redis" style="shape=cylinder3;fillColor=#333333;strokeColor=#666666;fontColor=#FFFFFF;whiteSpace=wrap;shadow=1;" vertex="1" parent="ns_core">
          <mxGeometry x="260" y="420" width="240" height="120" as="geometry"/>
        </mxCell>

        <!-- Edges -->
        <mxCell id="edge_core_reg" style="edgeStyle=orthogonalEdgeStyle;endArrow=classic;endFill=1;strokeColor=#bbbbbb;dashed=1;dashPattern=6 6;" edge="1" parent="ns_core" source="fc_pod" target="mcp_reg">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge_services_reg" style="edgeStyle=orthogonalEdgeStyle;endArrow=classic;endFill=1;strokeColor=#bbbbbb;dashed=1;dashPattern=6 6;" edge="1" parent="ingress" source="ns_member" target="mcp_reg">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge_client_fc" value="mTLS + OAuth2 (scoped)" style="edgeStyle=orthogonalEdgeStyle;endArrow=classic;endFill=1;strokeColor=#a3ffa3;strokeWidth=2;" edge="1" parent="ingress" source="ingress" target="fc_pod">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <mxCell id="edge_client_services" value="Direct MCP to chosen service" style="edgeStyle=orthogonalEdgeStyle;dashed=1;dashPattern=6 6;endArrow=classic;endFill=1;strokeColor=#a3ffa3;strokeWidth=2;" edge="1" parent="ingress" source="ingress" target="ns_member">
          <mxGeometry relative="1" as="geometry"/>
        </mxCell>

        <!-- Callouts -->
        <mxCell id="callout1" value="Directory returns signed manifests (JWS) + cache_ttl_seconds" style="shape=note;fillColor=#FFFFCC;strokeColor=#E6B800;fontColor=#4D3B00;shadow=1;whiteSpace=wrap;" vertex="1" parent="ingress">
          <mxGeometry x="100" y="920" width="380" height="80" as="geometry"/>
        </mxCell>

        <mxCell id="callout2" value="Members self-register at /servers/register and send /heartbeat" style="shape=note;fillColor=#FFFFCC;strokeColor=#E6B800;fontColor=#4D3B00;shadow=1;whiteSpace=wrap;" vertex="1" parent="ingress">
          <mxGeometry x="1340" y="920" width="420" height="80" as="geometry"/>
        </mxCell>

      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
