<mxfile host="app.diagrams.net" modified="2025-08-15T00:00:00.000Z" agent="ChatGPT" version="22.0.3" editor="www.draw.io">
  <diagram id="omega-guard-vs-sentinel" name="Praetorian vs Genesis Health Sentinel">
    <mxGraphModel dx="1440" dy="900" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1000" pageHeight="800" math="0" shadow="0">
      <root>
        <mxCell id="0"/>
        <mxCell id="1" parent="0"/>
        <mxCell id="layer_infra" value="Infrastructure / Runtime" style="swimlane;startSize=28;fillColor=#0b1220;fontColor=#e5e7eb;strokeColor=#111827;rounded=1;" vertex="1" parent="1"><mxGeometry x="10" y="60" width="720" height="310" as="geometry"/></mxCell><mxCell id="layer_app" value="Agent / Application" style="swimlane;startSize=28;fillColor=#0b1220;fontColor=#e5e7eb;strokeColor=#111827;rounded=1;" vertex="1" parent="1"><mxGeometry x="10" y="380" width="720" height="260" as="geometry"/></mxCell><mxCell id="layer_shared" value="Shared Data &amp; Control" style="swimlane;startSize=28;fillColor=#0b1220;fontColor=#e5e7eb;strokeColor=#111827;rounded=1;" vertex="1" parent="1"><mxGeometry x="10" y="650" width="720" height="170" as="geometry"/></mxCell><mxCell id="docker" value="Docker Engine &amp; Containers
(events: restart, die, health_status)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1f2937;fontColor=#ffffff;strokeColor=#111827;" vertex="1" parent="1"><mxGeometry x="30" y="100" width="220" height="80" as="geometry"/></mxCell><mxCell id="prom" value="Prometheus (optional confirm)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1f2937;fontColor=#93c5fd;strokeColor=#111827;" vertex="1" parent="1"><mxGeometry x="270" y="100" width="200" height="80" as="geometry"/></mxCell><mxCell id="sentinel" value="Genesis Health Sentinel (SERVICE)
FastAPI /health, /stats
- Watches Docker events
- Threshold logic (restarts/health/downtime)
- Optional Prometheus confirm
- Persists health_events to Mongo
- Publishes RCA_REQUEST via Redis" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#0ea5e9;fontColor=#0b1220;strokeColor=#0ea5e9;" vertex="1" parent="1"><mxGeometry x="30" y="200" width="680" height="160" as="geometry"/></mxCell><mxCell id="orchestrator" value="Orchestrator Agent
(receives RCA_REQUEST, drives RCA workflow)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#22c55e;fontColor=#0b1220;strokeColor=#22c55e;" vertex="1" parent="1"><mxGeometry x="30" y="420" width="260" height="100" as="geometry"/></mxCell><mxCell id="praetorian" value="Praetorian Guard (AGENT)
MCP tools: start/stop/status/force_health_check
- Monitors agents
- Resurrects failed agents
- System health sweeps" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#f59e0b;fontColor=#0b1220;strokeColor=#f59e0b;" vertex="1" parent="1"><mxGeometry x="310" y="420" width="400" height="100" as="geometry"/></mxCell><mxCell id="agents_fleet" value="Agents Fleet
(Other OMEGA Agents)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#1f2937;fontColor=#ffffff;strokeColor=#111827;" vertex="1" parent="1"><mxGeometry x="30" y="530" width="260" height="90" as="geometry"/></mxCell><mxCell id="redis" value="Redis (TASK_CHANNEL omega:tasks:orchestrator_agent)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ef4444;fontColor=#0b1220;strokeColor=#ef4444;" vertex="1" parent="1"><mxGeometry x="30" y="690" width="330" height="100" as="geometry"/></mxCell><mxCell id="mongo" value="MongoDB (health_events)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#10b981;fontColor=#0b1220;strokeColor=#10b981;" vertex="1" parent="1"><mxGeometry x="380" y="690" width="170" height="100" as="geometry"/></mxCell><mxCell id="federation" value="Federation Core" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#8b5cf6;fontColor=#0b1220;strokeColor=#8b5cf6;" vertex="1" parent="1"><mxGeometry x="570" y="690" width="140" height="100" as="geometry"/></mxCell><mxCell id="context" value="Context Server" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#60a5fa;fontColor=#0b1220;strokeColor=#60a5fa;" vertex="1" parent="1"><mxGeometry x="570" y="800" width="140" height="0" as="geometry"/></mxCell>
        <mxCell id="e1" value="Docker events" style="endArrow=block;endFill=1;strokeColor=#6b7280;rounded=1;html=1;" edge="1" parent="1" source="docker" target="sentinel"><mxGeometry relative="1" as="geometry"><mxPoint x="0" y="0" as="targetPoint"/></mxGeometry></mxCell><mxCell id="e2" value="Confirm unhealthy?" style="endArrow=block;endFill=1;strokeColor=#6b7280;rounded=1;html=1;" edge="1" parent="1" source="prom" target="sentinel"><mxGeometry relative="1" as="geometry"><mxPoint x="0" y="0" as="targetPoint"/></mxGeometry></mxCell><mxCell id="e3" value="Persist health_events" style="endArrow=block;endFill=1;strokeColor=#6b7280;rounded=1;html=1;" edge="1" parent="1" source="sentinel" target="mongo"><mxGeometry relative="1" as="geometry"><mxPoint x="0" y="0" as="targetPoint"/></mxGeometry></mxCell><mxCell id="e4" value="Publish RCA_REQUEST" style="endArrow=block;endFill=1;strokeColor=#6b7280;rounded=1;html=1;" edge="1" parent="1" source="sentinel" target="redis"><mxGeometry relative="1" as="geometry"><mxPoint x="0" y="0" as="targetPoint"/></mxGeometry></mxCell><mxCell id="e5" value="Deliver RCA_REQUEST" style="endArrow=block;endFill=1;strokeColor=#6b7280;rounded=1;html=1;" edge="1" parent="1" source="redis" target="orchestrator"><mxGeometry relative="1" as="geometry"><mxPoint x="0" y="0" as="targetPoint"/></mxGeometry></mxCell><mxCell id="e6" value="Delegate RCA tasks" style="endArrow=block;endFill=1;strokeColor=#6b7280;rounded=1;html=1;" edge="1" parent="1" source="orchestrator" target="agents_fleet"><mxGeometry relative="1" as="geometry"><mxPoint x="0" y="0" as="targetPoint"/></mxGeometry></mxCell><mxCell id="e7" value="Monitor &amp; resurrect" style="endArrow=block;endFill=1;strokeColor=#6b7280;rounded=1;html=1;" edge="1" parent="1" source="praetorian" target="agents_fleet"><mxGeometry relative="1" as="geometry"><mxPoint x="0" y="0" as="targetPoint"/></mxGeometry></mxCell><mxCell id="e8" value="HTTP /health" style="endArrow=block;endFill=1;strokeColor=#6b7280;rounded=1;html=1;" edge="1" parent="1" source="praetorian" target="federation"><mxGeometry relative="1" as="geometry"><mxPoint x="0" y="0" as="targetPoint"/></mxGeometry></mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>